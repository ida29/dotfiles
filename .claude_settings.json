{
  "statusLine": {
    "type": "command",
    "command": "input=$(cat); model=$(echo \"$input\" | jq -r '.model.display_name'); style=$(echo \"$input\" | jq -r '.output_style.name'); cwd=$(echo \"$input\" | jq -r '.workspace.current_dir'); project=$(echo \"$input\" | jq -r '.workspace.project_dir'); if [ \"$cwd\" = \"$project\" ]; then dir=$(basename \"$cwd\"); else dir=\"$(basename \"$project\")/$(realpath --relative-to=\"$project\" \"$cwd\" 2>/dev/null || echo \"$(basename \"$cwd\")\")\" 2>/dev/null || dir=$(basename \"$cwd\"); fi; if [ -d \"$cwd/.git\" ] || git -C \"$cwd\" rev-parse --git-dir >/dev/null 2>&1; then branch=$(git -C \"$cwd\" branch --show-current 2>/dev/null || echo \"detached\"); status=$(git -C \"$cwd\" status --porcelain 2>/dev/null); if [ -n \"$status\" ]; then git_info=\" ($branch*)\"; else git_info=\" ($branch)\"; fi; else git_info=\"\"; fi; printf \"\\033[2m%s [%s] %s%s\\033[0m\" \"$model\" \"$style\" \"$dir\" \"$git_info\""
  }
}